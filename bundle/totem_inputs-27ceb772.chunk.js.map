{"version":3,"file":"totem_inputs-27ceb772.chunk.js","sources":["../../../ui/core/components/totem_inputs.ts"],"sourcesContent":["import { BooleanPicker } from '../components/boolean_picker.js';\r\nimport { EnumPicker } from '../components/enum_picker.js';\r\nimport { IconEnumPicker, IconEnumPickerConfig } from '../components/icon_enum_picker.js';\r\nimport { IconPicker } from '../components/icon_picker.js';\r\nimport { IconPickerConfig } from '../components/icon_picker.js';\r\nimport {\r\n\tAirTotem,\r\n\tEarthTotem,\r\n\tFireTotem,\r\n\tWaterTotem,\r\n\tShamanTotems,\r\n\tEnhancementShaman,\r\n} from '../proto/shaman.js';\r\nimport { Spec } from '../proto/common.js';\r\nimport { ActionId } from '../proto_utils/action_id.js';\r\nimport { Player } from '../player.js';\r\nimport { Sim } from '../sim.js';\r\nimport { IndividualSimUI } from '../individual_sim_ui.js';\r\nimport { EventID, TypedEvent } from '../typed_event.js';\r\nimport * as InputHelpers from '../components/input_helpers.js';\r\nimport { SpecRotation, ShamanSpecs } from '../proto_utils/utils.js';\r\nimport { ContentBlock } from './content_block.js';\r\nimport { Input } from './input.js';\r\n\r\nexport function TotemsSection(parentElem: HTMLElement, simUI: IndividualSimUI<ShamanSpecs>): ContentBlock {\r\n\tlet contentBlock = new ContentBlock(parentElem, 'totems-settings', {\r\n\t\theader: { title: 'Totems' }\r\n\t});\r\n\r\n\tlet totemDropdownGroup = Input.newGroupContainer();\r\n\ttotemDropdownGroup.classList.add('totem-dropdowns-container', 'icon-group');\r\n\r\n\tlet fireElementalContainer = document.createElement('div');\r\n\tfireElementalContainer.classList.add('fire-elemental-input-container');\r\n\r\n\tcontentBlock.bodyElement.appendChild(totemDropdownGroup);\r\n\tcontentBlock.bodyElement.appendChild(fireElementalContainer);\r\n\r\n\tconst earthTotemPicker = new IconEnumPicker(totemDropdownGroup, simUI.player, {\r\n\t\textraCssClasses: [\r\n\t\t\t'earth-totem-picker',\r\n\t\t],\r\n\t\tnumColumns: 1,\r\n\t\tvalues: [\r\n\t\t\t{ color: '#ffdfba', value: EarthTotem.NoEarthTotem },\r\n\t\t\t{ actionId: ActionId.fromSpellId(25528), value: EarthTotem.StrengthOfEarthTotem },\r\n\t\t\t{ actionId: ActionId.fromSpellId(25509), value: EarthTotem.StoneskinTotem },\r\n\t\t\t{ actionId: ActionId.fromSpellId(8143), value: EarthTotem.TremorTotem },\r\n\t\t],\r\n\t\tequals: (a: EarthTotem, b: EarthTotem) => a == b,\r\n\t\tzeroValue: EarthTotem.NoEarthTotem,\r\n\t\tchangedEvent: (player: Player<ShamanSpecs>) => player.specOptionsChangeEmitter,\r\n\t\tgetValue: (player: Player<ShamanSpecs>) => player.getSpecOptions().totems?.earth || EarthTotem.NoEarthTotem,\r\n\t\tsetValue: (eventID: EventID, player: Player<ShamanSpecs>, newValue: number) => {\r\n\t\t\tconst newOptions = player.getSpecOptions();\r\n\t\t\tif (!newOptions.totems)\r\n\t\t\t\tnewOptions.totems = ShamanTotems.create();\r\n\t\t\tnewOptions.totems!.earth = newValue;\r\n\t\t\tplayer.setSpecOptions(eventID, newOptions);\r\n\t\t},\r\n\t});\r\n\r\n\tconst waterTotemPicker = new IconEnumPicker(totemDropdownGroup, simUI.player, {\r\n\t\textraCssClasses: [\r\n\t\t\t'water-totem-picker',\r\n\t\t],\r\n\t\tnumColumns: 1,\r\n\t\tvalues: [\r\n\t\t\t{ color: '#bae1ff', value: WaterTotem.NoWaterTotem },\r\n\t\t\t{ actionId: ActionId.fromSpellId(25570), value: WaterTotem.ManaSpringTotem },\r\n\t\t\t{ actionId: ActionId.fromSpellId(25567), value: WaterTotem.HealingStreamTotem },\r\n\t\t],\r\n\t\tequals: (a: WaterTotem, b: WaterTotem) => a == b,\r\n\t\tzeroValue: WaterTotem.NoWaterTotem,\r\n\t\tchangedEvent: (player: Player<ShamanSpecs>) => player.specOptionsChangeEmitter,\r\n\t\tgetValue: (player: Player<ShamanSpecs>) => player.getSpecOptions().totems?.water || WaterTotem.NoWaterTotem,\r\n\t\tsetValue: (eventID: EventID, player: Player<ShamanSpecs>, newValue: number) => {\r\n\t\t\tconst newOptions = player.getSpecOptions();\r\n\t\t\tif (!newOptions.totems)\r\n\t\t\t\tnewOptions.totems = ShamanTotems.create();\r\n\t\t\tnewOptions.totems!.water = newValue;\r\n\t\t\tplayer.setSpecOptions(eventID, newOptions);\r\n\t\t},\r\n\t});\r\n\r\n\tconst fireTotemPicker = new IconEnumPicker(totemDropdownGroup, simUI.player, {\r\n\t\textraCssClasses: [\r\n\t\t\t'fire-totem-picker',\r\n\t\t],\r\n\t\tnumColumns: 1,\r\n\t\tvalues: [\r\n\t\t\t{ color: '#ffb3ba', value: FireTotem.NoFireTotem },\r\n\t\t\t{ actionId: ActionId.fromSpellId(25552), value: FireTotem.MagmaTotem },\r\n\t\t\t{ actionId: ActionId.fromSpellId(25533), value: FireTotem.SearingTotem },\r\n\t\t\t{ actionId: ActionId.fromSpellId(57721), value: FireTotem.TotemOfWrath, showWhen: (player: Player<ShamanSpecs>) => player.getTalents().totemOfWrath },\r\n\t\t\t{ actionId: ActionId.fromSpellId(25557), value: FireTotem.FlametongueTotem },\r\n\t\t],\r\n\t\tequals: (a: FireTotem, b: FireTotem) => a == b,\r\n\t\tzeroValue: FireTotem.NoFireTotem,\r\n\t\tchangedEvent: (player: Player<ShamanSpecs>) => player.specOptionsChangeEmitter,\r\n\t\tgetValue: (player: Player<ShamanSpecs>) => player.getSpecOptions().totems?.fire || FireTotem.NoFireTotem,\r\n\t\tsetValue: (eventID: EventID, player: Player<ShamanSpecs>, newValue: number) => {\r\n\t\t\tconst newOptions = player.getSpecOptions();\r\n\t\t\tif (!newOptions.totems)\r\n\t\t\t\tnewOptions.totems = ShamanTotems.create();\r\n\t\t\tnewOptions.totems!.fire = newValue;\r\n\t\t\tplayer.setSpecOptions(eventID, newOptions);\r\n\t\t},\r\n\t});\r\n\r\n\tconst airTotemPicker = new IconEnumPicker(totemDropdownGroup, simUI.player, {\r\n\t\textraCssClasses: [\r\n\t\t\t'air-totem-picker',\r\n\t\t],\r\n\t\tnumColumns: 1,\r\n\t\tvalues: [\r\n\t\t\t{ color: '#baffc9', value: AirTotem.NoAirTotem },\r\n\t\t\t{ actionId: ActionId.fromSpellId(8512), value: AirTotem.WindfuryTotem },\r\n\t\t\t{ actionId: ActionId.fromSpellId(3738), value: AirTotem.WrathOfAirTotem },\r\n\t\t],\r\n\t\tequals: (a: AirTotem, b: AirTotem) => a == b,\r\n\t\tzeroValue: AirTotem.NoAirTotem,\r\n\t\tchangedEvent: (player: Player<ShamanSpecs>) => player.specOptionsChangeEmitter,\r\n\t\tgetValue: (player: Player<ShamanSpecs>) => player.getSpecOptions().totems?.air || AirTotem.NoAirTotem,\r\n\t\tsetValue: (eventID: EventID, player: Player<ShamanSpecs>, newValue: number) => {\r\n\t\t\tconst newOptions = player.getSpecOptions();\r\n\t\t\tif (!newOptions.totems)\r\n\t\t\t\tnewOptions.totems = ShamanTotems.create();\r\n\t\t\tnewOptions.totems!.air = newValue;\r\n\t\t\tplayer.setSpecOptions(eventID, newOptions);\r\n\t\t},\r\n\t});\r\n\r\n\t// Enchancement Shaman uses the Fire Elemental Inputs with custom inputs.\r\n\tif (simUI.player.spec != Spec.SpecEnhancementShaman) {\r\n\t\tconst fireElementalBooleanIconInput = InputHelpers.makeBooleanIconInput<ShamanSpecs, ShamanTotems, Player<ShamanSpecs>>({\r\n\t\t\tgetModObject: (player: Player<ShamanSpecs>) => player,\r\n\t\t\tgetValue: (player: Player<ShamanSpecs>) => player.getSpecOptions().totems || ShamanTotems.create(),\r\n\t\t\tsetValue: (eventID: EventID, player: Player<ShamanSpecs>, newVal: ShamanTotems) => {\r\n\t\t\t\tconst newOptions = player.getSpecOptions();\r\n\t\t\t\tnewOptions.totems = newVal;\r\n\t\t\t\tplayer.setSpecOptions(eventID, newOptions);\r\n\t\t\t},\r\n\t\t\tchangeEmitter: (player: Player<Spec.SpecEnhancementShaman>) => player.specOptionsChangeEmitter,\r\n\t\t}, ActionId.fromSpellId(2894), \"useFireElemental\");\r\n\r\n\t\tnew IconPicker(fireElementalContainer, simUI.player, fireElementalBooleanIconInput);\r\n\t}\r\n\r\n\treturn contentBlock;\r\n}\r\n"],"names":["TotemsSection","parentElem","simUI","contentBlock","ContentBlock","header","title","totemDropdownGroup","Input","newGroupContainer","classList","add","fireElementalContainer","document","createElement","bodyElement","appendChild","IconEnumPicker","player","extraCssClasses","numColumns","values","color","value","EarthTotem","NoEarthTotem","actionId","ActionId","fromSpellId","StrengthOfEarthTotem","StoneskinTotem","TremorTotem","equals","a","b","zeroValue","changedEvent","specOptionsChangeEmitter","getValue","getSpecOptions","totems","earth","setValue","eventID","newValue","newOptions","ShamanTotems","create","setSpecOptions","WaterTotem","NoWaterTotem","ManaSpringTotem","HealingStreamTotem","water","FireTotem","NoFireTotem","MagmaTotem","SearingTotem","TotemOfWrath","showWhen","getTalents","totemOfWrath","FlametongueTotem","fire","AirTotem","NoAirTotem","WindfuryTotem","WrathOfAirTotem","air","spec","Spec","SpecEnhancementShaman","fireElementalBooleanIconInput","InputHelpers.makeBooleanIconInput","getModObject","newVal","changeEmitter","IconPicker"],"mappings":"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"}